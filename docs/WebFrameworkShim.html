<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Class: WebFrameworkShim</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme-without-scrollbar.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="API.html">API</a></div><div class="sidebar-section-children"><a href="ClassWrapSpec.html">ClassWrapSpec</a></div><div class="sidebar-section-children"><a href="DatastoreParameters.html">DatastoreParameters</a></div><div class="sidebar-section-children"><a href="DatastoreShim.html">DatastoreShim</a></div><div class="sidebar-section-children"><a href="InstrumentationDescriptor.html">InstrumentationDescriptor</a></div><div class="sidebar-section-children"><a href="MessageShim.html">MessageShim</a></div><div class="sidebar-section-children"><a href="MessageSpec.html">MessageSpec</a></div><div class="sidebar-section-children"><a href="MessageSubscribeSpec.html">MessageSubscribeSpec</a></div><div class="sidebar-section-children"><a href="MiddlewareMounterSpec.html">MiddlewareMounterSpec</a></div><div class="sidebar-section-children"><a href="MiddlewareSpec.html">MiddlewareSpec</a></div><div class="sidebar-section-children"><a href="OperationSpec.html">OperationSpec</a></div><div class="sidebar-section-children"><a href="PromiseShim.html">PromiseShim</a></div><div class="sidebar-section-children"><a href="QuerySpec.html">QuerySpec</a></div><div class="sidebar-section-children"><a href="QueueMessageParameters.html">QueueMessageParameters</a></div><div class="sidebar-section-children"><a href="RecorderSpec.html">RecorderSpec</a></div><div class="sidebar-section-children"><a href="RenderSpec.html">RenderSpec</a></div><div class="sidebar-section-children"><a href="SegmentSpec.html">SegmentSpec</a></div><div class="sidebar-section-children"><a href="Shim.html">Shim</a></div><div class="sidebar-section-children"><a href="TransactionHandle.html">TransactionHandle</a></div><div class="sidebar-section-children"><a href="TransactionShim.html">TransactionShim</a></div><div class="sidebar-section-children"><a href="TransactionSpec.html">TransactionSpec</a></div><div class="sidebar-section-children"><a href="WebFrameworkShim.html">WebFrameworkShim</a></div><div class="sidebar-section-children"><a href="WrapSpec.html">WrapSpec</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-tutorials"><div>Tutorials</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="tutorial-instrumentation.html">Instrumentation Examples</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-interfaces"><div>Interfaces</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="ParsedQueryData.html">ParsedQueryData</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#CallbackBindFunction">CallbackBindFunction</a></div><div class="sidebar-section-children"><a href="global.html#ClassWrapSpecParams">ClassWrapSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#ConstructorHookFunction">ConstructorHookFunction</a></div><div class="sidebar-section-children"><a href="global.html#DatastoreParametersParams">DatastoreParametersParams</a></div><div class="sidebar-section-children"><a href="global.html#InContextCallback">InContextCallback</a></div><div class="sidebar-section-children"><a href="global.html#InstrumentationDescriptorParams">InstrumentationDescriptorParams</a></div><div class="sidebar-section-children"><a href="global.html#InstrumentationOnError">InstrumentationOnError</a></div><div class="sidebar-section-children"><a href="global.html#InstrumentationOnRequire">InstrumentationOnRequire</a></div><div class="sidebar-section-children"><a href="global.html#MessageBrokerHeadersFn">MessageBrokerHeadersFn</a></div><div class="sidebar-section-children"><a href="global.html#MessageConsumerWrapperFunction">MessageConsumerWrapperFunction</a></div><div class="sidebar-section-children"><a href="global.html#MessageFunction">MessageFunction</a></div><div class="sidebar-section-children"><a href="global.html#MessageHandlerFunction">MessageHandlerFunction</a></div><div class="sidebar-section-children"><a href="global.html#MessageSpecParams">MessageSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#MessageSubscribeSpecParams">MessageSubscribeSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#MiddlewareMounterSpecParams">MiddlewareMounterSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#MiddlewareSpecParams">MiddlewareSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#MiddlewareTypeNames">MiddlewareTypeNames</a></div><div class="sidebar-section-children"><a href="global.html#MiddlewareWrapperFunction">MiddlewareWrapperFunction</a></div><div class="sidebar-section-children"><a href="global.html#OperationSpecParams">OperationSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#QueryFunction">QueryFunction</a></div><div class="sidebar-section-children"><a href="global.html#QueryParserFunction">QueryParserFunction</a></div><div class="sidebar-section-children"><a href="global.html#QuerySpecFunction">QuerySpecFunction</a></div><div class="sidebar-section-children"><a href="global.html#QuerySpecParams">QuerySpecParams</a></div><div class="sidebar-section-children"><a href="global.html#QueueMessageParametersParams">QueueMessageParametersParams</a></div><div class="sidebar-section-children"><a href="global.html#RecorderFunction">RecorderFunction</a></div><div class="sidebar-section-children"><a href="global.html#RecorderSpecParams">RecorderSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#RenderSpecParams">RenderSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#ResponsePredicate">ResponsePredicate</a></div><div class="sidebar-section-children"><a href="global.html#RouteNextFunction">RouteNextFunction</a></div><div class="sidebar-section-children"><a href="global.html#RouteParameterFunction">RouteParameterFunction</a></div><div class="sidebar-section-children"><a href="global.html#RouteParserFunction">RouteParserFunction</a></div><div class="sidebar-section-children"><a href="global.html#RouteRequestFunction">RouteRequestFunction</a></div><div class="sidebar-section-children"><a href="global.html#SegmentFunction">SegmentFunction</a></div><div class="sidebar-section-children"><a href="global.html#SegmentSpecParams">SegmentSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#SpecAfterFunction">SpecAfterFunction</a></div><div class="sidebar-section-children"><a href="global.html#TransactionSpecParams">TransactionSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#WrapFunction">WrapFunction</a></div><div class="sidebar-section-children"><a href="global.html#WrapSpecParams">WrapSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#createShimFromType">createShimFromType</a></div><div class="sidebar-section-children"><a href="global.html#getDatabaseNameFromUseQuery">getDatabaseNameFromUseQuery</a></div><div class="sidebar-section-children"><a href="global.html#startSegmentCallback">startSegmentCallback</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section><header><h1 id="WebFrameworkShim-title" class="has-anchor">WebFrameworkShim</h1><div class="class-description"><p>A helper class for wrapping web framework modules.</p></div></header><article><div class="container-overview"><h2 id="constructor" class="has-anchor">Constructor</h2><h3 class="name has-anchor" id="WebFrameworkShim"><span class="type-signature"></span>new WebFrameworkShim<span class="signature">(agent, moduleName, resolvedName, shimName, pkgVersion)</span></h3><div class="description"><p>Constructs a shim associated with the given agent instance, specialized for instrumenting web frameworks.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>agent</code></td><td class="type"><span class="param-type">Agent</span></td><td class="description last"><p>The agent this shim will use.</p></td></tr><tr><td class="name"><code>moduleName</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>The name of the module being instrumented.</p></td></tr><tr><td class="name"><code>resolvedName</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>The full path to the loaded module.</p></td></tr><tr><td class="name"><code>shimName</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>Used to persist shim ids across different shim instances.</p></td></tr><tr><td class="name"><code>pkgVersion</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>version of module</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line63">line 63</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="TransactionShim.html">TransactionShim</a></li><li><a href="WebFrameworkShim.html#.FRAMEWORK_NAMES">WebFrameworkShim.FRAMEWORK_NAMES</a></li></ul></dd></div></dl></div><h2 id="Extends" class="subsection-title has-anchor">Extends</h2><ul><li><a href="TransactionShim.html">TransactionShim</a></li></ul><h2 id="members" class="subsection-title has-anchor">Members</h2><h3 class="name has-anchor" id="agent"><span class="type-signature">(readonly) </span>agent<span class="type-signature"> :Agent</span></h3><div class="description"><p>The agent associated with this shim.</p></div><div class="member-item-container flex"><strong>Type:</strong><ul><li><span class="param-type">Agent</span></li></ul></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#agent">Shim#agent</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line64">line 64</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="logger"><span class="type-signature">(readonly) </span>logger<span class="type-signature"> :Logger</span></h3><div class="description"><p>The logger for this shim.</p></div><div class="member-item-container flex"><strong>Type:</strong><ul><li><span class="param-type">Logger</span></li></ul></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#logger">Shim#logger</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line86">line 86</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="tracer"><span class="type-signature">(readonly) </span>tracer<span class="type-signature"> :Tracer</span></h3><div class="description"><p>The transaction tracer in use by the agent for the shim.</p></div><div class="member-item-container flex"><strong>Type:</strong><ul><li><span class="param-type">Tracer</span></li></ul></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#tracer">Shim#tracer</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line75">line 75</a></li></ul></dd></div></dl><h3 class="name has-anchor" id=".FRAMEWORK_NAMES"><span class="type-signature">(static, constant) </span>FRAMEWORK_NAMES<span class="type-signature"> :string</span></h3><div class="description"><p>An enumeration of well-known web frameworks so that new instrumentations can use the same names we already use for first-party instrumentation.</p><p>Each of these values is also exposed directly on the WebFrameworkShim class as static members.</p></div><div class="member-item-container flex"><strong>Type:</strong><ul><li><span class="param-type">string</span></li></ul></div><b class="subsection-title">Properties</b><div class="allow-overflow"><table class="props"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>CONNECT</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"></td></tr><tr><td class="name"><code>DIRECTOR</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"></td></tr><tr><td class="name"><code>EXPRESS</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"></td></tr><tr><td class="name"><code>FASTIFY</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"></td></tr><tr><td class="name"><code>HAPI</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"></td></tr><tr><td class="name"><code>KOA</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"></td></tr><tr><td class="name"><code>NEXT</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"></td></tr><tr><td class="name"><code>NEST</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"></td></tr><tr><td class="name"><code>RESTIFY</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line30">line 30</a></li></ul></dd></div></dl><h2 id="methods" class="subsection-title has-anchor">Methods</h2><h3 class="name has-anchor" id="applyContext"><span class="type-signature"></span>applyContext<span class="signature">(params)</span><span class="type-signature"> &rarr; {*}</span></h3><div class="description"><p>Binds a function to the async context manager with the passed in context.</p><ul><li><code>applyContext({ func, context , full, boundThis, args, inContextCB })</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>params</code></td><td class="type"><span class="param-type">object</span></td><td class="description last"><p>to function</p><h6>Properties</h6><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>func</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The function to execute in given async context.</p></td></tr><tr><td class="name"><code>context</code></td><td class="type"><span class="param-type">Context</span></td><td class="attributes"></td><td class="description last"><p>This context you want to run a function in</p></td></tr><tr><td class="name"><code>full</code></td><td class="type"><span class="param-type">boolean</span></td><td class="attributes"></td><td class="description last"><p>Indicates if the full lifetime of the segment is bound to this function.</p></td></tr><tr><td class="name"><code>boundThis</code></td><td class="type"><span class="param-type">*</span></td><td class="attributes"></td><td class="description last"><p>The <code>this</code> argument for the function.</p></td></tr><tr><td class="name"><code>args</code></td><td class="type"><span class="param-type">Array.&lt;*></span></td><td class="attributes"></td><td class="description last"><p>The arguments to be passed into the function.</p></td></tr><tr><td class="name"><code>inContextCB</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The function used to do more instrumentation work. This function is guaranteed to be executed with the segment associated with.</p></td></tr></tbody></table></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#applyContext">Shim#applyContext</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1229">line 1229</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>Whatever value <code>func</code> returned.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">*</span></dd></dl></div><h3 class="name has-anchor" id="applySegment"><span class="type-signature"></span>applySegment<span class="signature">(func, segment, full, boundThis, args, inContextCB<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {*}</span></h3><div class="description"><p>Binds a function to the async context manager with the segment passed in. It'll pull the active transaction from the context manager.</p><ul><li><code>applySegment(func, segment, full, context, args[, inContextCB])</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>func</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The function to execute in the context of the given segment.</p></td></tr><tr><td class="name"><code>segment</code></td><td class="type"><span class="param-type">TraceSegment</span></td><td class="attributes"></td><td class="description last"><p>The segment to make active for the duration of the function.</p></td></tr><tr><td class="name"><code>full</code></td><td class="type"><span class="param-type">boolean</span></td><td class="attributes"></td><td class="description last"><p>Indicates if the full lifetime of the segment is bound to this function.</p></td></tr><tr><td class="name"><code>boundThis</code></td><td class="type"><span class="param-type">*</span></td><td class="attributes"></td><td class="description last"><p>The <code>this</code> argument for the function.</p></td></tr><tr><td class="name"><code>args</code></td><td class="type"><span class="param-type">Array.&lt;*></span></td><td class="attributes"></td><td class="description last"><p>The arguments to be passed into the function.</p></td></tr><tr><td class="name"><code>inContextCB</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The function used to do more instrumentation work. This function is guaranteed to be executed with the segment associated with.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#applySegment">Shim#applySegment</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1273">line 1273</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>Whatever value <code>func</code> returned.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">*</span></dd></dl></div><h3 class="name has-anchor" id="argsToArray"><span class="type-signature"></span>argsToArray<span class="signature">()</span><span class="type-signature"> &rarr; {Array}</span></h3><div class="description"><p>Like <a href="Shim.html#toArray"><code>Shim#toArray</code></a>, but converts <code>arguments</code> to an array.</p><p>This is the preferred function, when used with <code>.apply</code>, for converting the <code>arguments</code> object into an actual <code>Array</code> as it will not cause deopts.</p></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#argsToArray">Shim#argsToArray</a></li></ul></dd></div><div class="details-item-container"><dt class="important tag-deprecated bold">Deprecated</dt><dd><ul><li>2025-06-10 -- see https://github.com/newrelic/node-newrelic/issues/3089</li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1506">line 1506</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="Shim.html#toArray">Shim#toArray</a></li><li><a href="https://github.com/petkaantonov/bluebird/wiki/Optimization-killers">https://github.com/petkaantonov/bluebird/wiki/Optimization-killers</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>An array containing the elements of <code>arguments</code>.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Array</span></dd></dl></div><h3 class="name has-anchor" id="assignId"><span class="type-signature"></span>assignId<span class="signature">(shimName)</span></h3><div class="description"><p>Assigns id to shim instance. If shimName is present it will reuse an id otherwise it'll create a unique id.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>shimName</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>Used to persist shim ids across different instances.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#assignId">Shim#assignId</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1794">line 1794</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="assignOriginal"><span class="type-signature"></span>assignOriginal<span class="signature">(wrapped, original, forceOrig)</span></h3><div class="description"><p>Assigns the shim id and original on the wrapped item. TODO: Once all wrapping is converted to proxies, we won't need to set this property as the trap on 'get' will return the original for symbols.original. For now, we have to prevent setting this on original.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>wrapped</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>wrapped item</p></td></tr><tr><td class="name"><code>original</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><ul><li>The item being wrapped.</li></ul></td></tr><tr><td class="name"><code>forceOrig</code></td><td class="type"><span class="param-type">boolean</span></td><td class="description last"><p>flag to indicate to overwrite original function</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#assignOriginal">Shim#assignOriginal</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1777">line 1777</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="bindCallbackSegment"><span class="type-signature"></span>bindCallbackSegment<span class="signature">(spec, args, cbIdx, parentSegment<span class="signature-attributes">opt</span>)</span></h3><div class="description"><p>Replaces the callback in an arguments array with one that has been bound to the given segment.</p><ul><li><code>bindCallbackSegment(spec, args, cbIdx [, segment])</code></li><li><code>bindCallbackSegment(spec, obj, property [, segment])</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type">Spec</span></td><td class="attributes"></td><td class="description last"><p>spec to original wrapped function, used to call after method with arguments passed to callback</p></td></tr><tr><td class="name"><code>args</code></td><td class="type"><span class="param-type">Array</span> |<wbr> <span class="param-type">object</span></td><td class="attributes"></td><td class="description last"><p>The arguments array to pull the cb from.</p></td></tr><tr><td class="name"><code>cbIdx</code></td><td class="type"><span class="param-type">number</span> |<wbr> <span class="param-type">string</span></td><td class="attributes"></td><td class="description last"><p>The index of the callback.</p></td></tr><tr><td class="name"><code>parentSegment</code></td><td class="type"><span class="param-type">TraceSegment</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The segment to use as the callback segment's parent. Defaults to the currently active segment.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#bindCallbackSegment">Shim#bindCallbackSegment</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1050">line 1050</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="Shim.html#bindSegment">Shim#bindSegment</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="bindContext"><span class="type-signature"></span>bindContext<span class="signature">(params)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Binds the execution of a function to a context instance. Similar to bindSegment but this requires passing in of an instance of Context.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>params</code></td><td class="type"><span class="param-type">object</span></td><td class="description last"><p>to function</p><h6>Properties</h6><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the property or a single function to bind to a segment.</p></td></tr><tr><td class="name"><code>property</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The property to bind. If omitted, the <code>nodule</code> parameter is assumed to be the function to bind the segment to.</p></td></tr><tr><td class="name"><code>context</code></td><td class="type"><span class="param-type">Context</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The context to bind the execution of the function to.</p></td></tr><tr><td class="name"><code>full</code></td><td class="type"><span class="param-type">boolean</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Indicates if the full lifetime of the segment is bound to this function.</p></td></tr></tbody></table></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#bindContext">Shim#bindContext</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1007">line 1007</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter after wrapping.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="bindCreateTransaction"><span class="type-signature"></span>bindCreateTransaction<span class="signature">(nodule, property<span class="signature-attributes">opt</span>, spec)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Wraps one or more functions such that new transactions are created when invoked.</p><ul><li><code>bindCreateTransaction(nodule, property, spec)</code></li><li><code>bindCreateTransaction(func, spec)</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the property to wrap, or a single function to wrap.</p></td></tr><tr><td class="name"><code>property</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The property to wrap. If omitted, the <code>nodule</code> parameter is assumed to be the function to wrap.</p></td></tr><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type"><a href="TransactionSpec.html">TransactionSpec</a></span></td><td class="attributes"></td><td class="description last"><p>The spec for creating the transaction.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="TransactionShim.html#bindCreateTransaction">TransactionShim#bindCreateTransaction</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_transaction-shim.js.html">lib/shim/transaction-shim.js</a>, <a href="lib_shim_transaction-shim.js.html#line92">line 92</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter to this function, after wrapping it or its property.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="bindPromise"><span class="type-signature"></span>bindPromise<span class="signature">(promise<span class="signature-attributes">non-null</span>, segment<span class="signature-attributes">non-null</span>)</span><span class="type-signature"> &rarr; {Promise}</span></h3><div class="description"><p>Binds the given segment to the completion of the Promise. Updates segment timing and resets opaque state.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>promise</code></td><td class="type"><span class="param-type">Promise</span></td><td class="description last"><p>The Promise to bind.</p></td></tr><tr><td class="name"><code>segment</code></td><td class="type"><span class="param-type">TraceSegment</span></td><td class="description last"><p>The segment to bind to the Promise.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#bindPromise">Shim#bindPromise</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1697">line 1697</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The promise to continue with.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise</span></dd></dl></div><h3 class="name has-anchor" id="bindSegment"><span class="type-signature"></span>bindSegment<span class="signature">(nodule, property<span class="signature-attributes">opt</span>, segment<span class="signature-attributes">opt, nullable</span>, full<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Binds the execution of a function to a single segment.</p><ul><li><code>bindSegment(nodule , property [, segment [, full]])</code></li><li><code>bindSegment(func [, segment [, full]])</code></li></ul><p>If called with a <code>nodule</code> and a property, the wrapped property will be put back on the nodule. Otherwise, the wrapped function is just returned.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the property or a single function to bind to a segment.</p></td></tr><tr><td class="name"><code>property</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The property to bind. If omitted, the <code>nodule</code> parameter is assumed to be the function to bind the segment to.</p></td></tr><tr><td class="name"><code>segment</code></td><td class="type"><span class="param-type">TraceSegment</span></td><td class="attributes">&lt;optional><br>&lt;nullable><br></td><td class="description last"><p>The segment to bind the execution of the function to. If omitted or <code>null</code> the currently active segment will be bound instead.</p></td></tr><tr><td class="name"><code>full</code></td><td class="type"><span class="param-type">boolean</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Indicates if the full lifetime of the segment is bound to this function.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#bindSegment">Shim#bindSegment</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line970">line 970</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter after wrapping.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="copySegmentParameters"><span class="type-signature"></span>copySegmentParameters<span class="signature">(segment, parameters)</span></h3><div class="description"><p>Copies the given parameters onto the segment, respecting the current agent configuration.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>segment</code></td><td class="type"><span class="param-type">TraceSegment</span></td><td class="description last"><p>The segment to copy the parameters onto.</p></td></tr><tr><td class="name"><code>parameters</code></td><td class="type"><span class="param-type">object</span></td><td class="description last"><p>The parameters to copy.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#copySegmentParameters">Shim#copySegmentParameters</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1712">line 1712</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="createSegment"><span class="type-signature"></span>createSegment<span class="signature">(name, recorder<span class="signature-attributes">opt, nullable</span>, parent<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; (nullable) {TraceSegment}</span></h3><div class="description"><p>Creates a new segment.</p><ul><li><code>createSegment(opts)</code></li><li><code>createSegment(name [, recorder] [, parent])</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>name</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes"></td><td class="description last"><p>The name to give the new segment.</p></td></tr><tr><td class="name"><code>recorder</code></td><td class="type"><span class="param-type">function</span></td><td class="attributes">&lt;optional><br>&lt;nullable><br></td><td class="description last"><p>Optional. A function which will record the segment as a metric. Default is to not record the segment.</p></td></tr><tr><td class="name"><code>parent</code></td><td class="type"><span class="param-type">TraceSegment</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Optional. The segment to use as the parent. Default is to use the currently active segment.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#createSegment">Shim#createSegment</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1297">line 1297</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>A new trace segment if a transaction is active, else <code>null</code> is returned.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">TraceSegment</span></dd></dl></div><h3 class="name has-anchor" id="defineProperties"><span class="type-signature"></span>defineProperties<span class="signature">(obj, props)</span></h3><div class="description"><p>Adds several properties to the given object.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">object</span></td><td class="description last"><p>The object to add the properties to.</p></td></tr><tr><td class="name"><code>props</code></td><td class="type"><span class="param-type">object</span></td><td class="description last"><p>A mapping of properties to values to add.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#defineProperties">Shim#defineProperties</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1586">line 1586</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="Shim.html#defineProperty">Shim#defineProperty</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="defineProperty"><span class="type-signature"></span>defineProperty<span class="signature">(obj, name, value)</span></h3><div class="description"><p>Defines a read-only property on the given object.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">object</span></td><td class="description last"><p>The object to add the property to.</p></td></tr><tr><td class="name"><code>name</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>The name of the property to add.</p></td></tr><tr><td class="name"><code>value</code></td><td class="type"><span class="param-type">*</span> |<wbr> <span class="param-type">function</span></td><td class="description last"><p>The value to set. If a function is given, it is used as a getter, otherwise the value is directly set as an unwritable property.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#defineProperty">Shim#defineProperty</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1563">line 1563</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="errorHandled"><span class="type-signature"></span>errorHandled<span class="signature">(req, err)</span></h3><div class="description"><p>Indicates that the given error has been handled for this request.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>req</code></td><td class="type"><span class="param-type">Request</span></td><td class="description last"><p>The request which caused the error.</p></td></tr><tr><td class="name"><code>err</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The error which has been handled.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line306">line 306</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="WebFrameworkShim.html#noticeError">WebFrameworkShim#noticeError</a></li><li><a href="WebFrameworkShim.html#setErrorPredicate">WebFrameworkShim#setErrorPredicate</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="execute"><span class="type-signature"></span>execute<span class="signature">(nodule, spec)</span></h3><div class="description"><p>Entry point for executing a spec.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="description last"><p>Class or module containing the function to wrap.</p></td></tr><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type">Spec</span></td><td class="description last"><p><code>Spec</code></p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#execute">Shim#execute</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line264">line 264</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="getActiveSegment"><span class="type-signature"></span>getActiveSegment<span class="signature">(obj<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; (nullable) {TraceSegment}</span></h3><div class="description"><p>Retrieves the segment associated with the given object, or the currently active segment if no object is given.</p><ul><li><code>getActiveSegment([obj])</code></li></ul><p>An active segment is one whose transaction is still active (e.g. has not ended yet).</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The object to retrieve a segment from.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#getActiveSegment">Shim#getActiveSegment</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1170">line 1170</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The trace segment associated with the given object or the currently active segment if no object is provided or no segment is associated with the object.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">TraceSegment</span></dd></dl></div><h3 class="name has-anchor" id="getName"><span class="type-signature"></span>getName<span class="signature">(obj)</span><span class="type-signature"> &rarr; {string}</span></h3><div class="description"><p>Determine the name of an object.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object to get a name for.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#getName">Shim#getName</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1371">line 1371</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The name of the object if it has one, else <code>&lt;anonymous&gt;</code>.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">string</span></dd></dl></div><h3 class="name has-anchor" id="getOriginal"><span class="type-signature"></span>getOriginal<span class="signature">(nodule, property<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Retrieves the original method for a wrapped function.</p><ul><li><code>getOriginal(nodule, property)</code></li><li><code>getOriginal(func)</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source of the property to get the original of, or a function to unwrap.</p></td></tr><tr><td class="name"><code>property</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>A property on <code>nodule</code> to get the original value of.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#getOriginal">Shim#getOriginal</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line916">line 916</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The original value for the given item.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="getOriginalOnce"><span class="type-signature"></span>getOriginalOnce<span class="signature">(nodule, property<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Retrieves the value of symbols.original on the wrapped function. Unlike <code>getOriginal</code> this just looks in the direct wrapped function</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source of the property to get the original of, or a function to unwrap.</p></td></tr><tr><td class="name"><code>property</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>A property on <code>nodule</code> to get the original value of.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#getOriginalOnce">Shim#getOriginalOnce</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line939">line 939</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The original value for the given item.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="getSegment"><span class="type-signature"></span>getSegment<span class="signature">(obj<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; (nullable) {TraceSegment}</span></h3><div class="description"><p>Retrieves the segment associated with the given object, or the current segment if no object is given.</p><ul><li><code>getSegment([obj])</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The object to retrieve a segment from.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#getSegment">Shim#getSegment</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1147">line 1147</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The trace segment associated with the given object or the current segment if no object is provided or no segment is associated with the object.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">TraceSegment</span></dd></dl></div><h3 class="name has-anchor" id="insertCATReplyHeader"><span class="type-signature"></span>insertCATReplyHeader<span class="signature">(headers, useAlternateHeaderNames<span class="signature-attributes">opt</span>)</span></h3><div class="description"><p>Adds CAT headers for an outbound response.</p><ul><li><code>insertCATReplyHeaders(headers [, useAlternateHeaderNames])</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>headers</code></td><td class="type"><span class="param-type">object</span></td><td class="attributes"></td><td class="description last"><p>The outbound response headers object to inject our CAT headers into.</p></td></tr><tr><td class="name"><code>useAlternateHeaderNames</code></td><td class="type"><span class="param-type">boolean</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Indicates if HTTP-style headers should be used or alternate style. Some transport protocols are more strict on the characters allowed in headers and this option can be used to toggle use of pure-alpha header names.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="TransactionShim.html#insertCATReplyHeader">TransactionShim#insertCATReplyHeader</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_transaction-shim.js.html">lib/shim/transaction-shim.js</a>, <a href="lib_shim_transaction-shim.js.html#line299">line 299</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="insertCATRequestHeaders"><span class="type-signature"></span>insertCATRequestHeaders<span class="signature">(headers, useAlternateHeaderNames<span class="signature-attributes">opt</span>)</span></h3><div class="description"><p>Adds CAT headers for an outbound request.</p><ul><li><code>insertCATRequestHeaders(headers [, useAlternateHeaderNames])</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>headers</code></td><td class="type"><span class="param-type">object</span></td><td class="attributes"></td><td class="description last"><p>The outbound request headers object to inject our CAT headers into.</p></td></tr><tr><td class="name"><code>useAlternateHeaderNames</code></td><td class="type"><span class="param-type">boolean</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Indicates if HTTP-style headers should be used or alternate style. Some transport protocols are more strict on the characters allowed in headers and this option can be used to toggle use of pure-alpha header names.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="TransactionShim.html#insertCATRequestHeaders">TransactionShim#insertCATRequestHeaders</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_transaction-shim.js.html">lib/shim/transaction-shim.js</a>, <a href="lib_shim_transaction-shim.js.html#line257">line 257</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="interceptPromise"><span class="type-signature"></span>interceptPromise<span class="signature">(prom, cb)</span><span class="type-signature"> &rarr; {Promise}</span></h3><div class="description"><p>Executes the given callback when the promise is finalized, whether it is resolved or rejected.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>prom</code></td><td class="type"><span class="param-type">Promise</span></td><td class="description last"><p>Some kind of promise. Must have a <code>then</code> method.</p></td></tr><tr><td class="name"><code>cb</code></td><td class="type"><span class="param-type">function</span></td><td class="description last"><p>A function to call when the promise resolves.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#interceptPromise">Shim#interceptPromise</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1681">line 1681</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>A new promise to replace the original one.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Promise</span></dd></dl></div><h3 class="name has-anchor" id="isArray"><span class="type-signature"></span>isArray<span class="signature">(obj)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if the given object exists and is an array.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object to check.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isArray">Shim#isArray</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1437">line 1437</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the object is an array, else false.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="isAsyncFunction"><span class="type-signature"></span>isAsyncFunction<span class="signature">(fn)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if function is an async function. Note it does not test if the return value of function is a promise or async function</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>fn</code></td><td class="type"><span class="param-type">function</span></td><td class="description last"><p>function to test if async</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isAsyncFunction">Shim#isAsyncFunction</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1461">line 1461</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the function is an async function</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="isBoolean"><span class="type-signature"></span>isBoolean<span class="signature">(obj)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if the given object is a boolean literal.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object to check.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isBoolean">Shim#isBoolean</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1426">line 1426</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the object is a boolean literal, else false.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="isFunction"><span class="type-signature"></span>isFunction<span class="signature">(obj)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if the given object exists and is a function.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object to check.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isFunction">Shim#isFunction</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1393">line 1393</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the object is a function, else false.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="isNull"><span class="type-signature"></span>isNull<span class="signature">(val)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if the given value is null.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>val</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The value to check.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isNull">Shim#isNull</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1472">line 1472</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the value is null, else false.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="isNumber"><span class="type-signature"></span>isNumber<span class="signature">(obj)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if the given object is a number literal.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object to check.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isNumber">Shim#isNumber</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1415">line 1415</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the object is a number literal, else false.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="isObject"><span class="type-signature"></span>isObject<span class="signature">(obj)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if the given object is an Object.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object to check.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isObject">Shim#isObject</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1382">line 1382</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the object is an Object, else false.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="isPromise"><span class="type-signature"></span>isPromise<span class="signature">(obj)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if the given object is a promise instance.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object to check.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isPromise">Shim#isPromise</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1448">line 1448</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the object is a promise, else false.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="isString"><span class="type-signature"></span>isString<span class="signature">(obj)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if the given object exists and is a string.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object to check.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isString">Shim#isString</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1404">line 1404</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the object is a string, else false.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="isWrapped"><span class="type-signature"></span>isWrapped<span class="signature">(nodule, property<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {boolean}</span></h3><div class="description"><p>Determines if the specified function or property exists and is wrapped.</p><ul><li><code>isWrapped(nodule, property)</code></li><li><code>isWrapped(func)</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the property or a single function to check.</p></td></tr><tr><td class="name"><code>property</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The property to check. If omitted, the <code>nodule</code> parameter is assumed to be the function to check.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#isWrapped">Shim#isWrapped</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line609">line 609</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="Shim.html#wrap">Shim#wrap</a></li><li><a href="Shim.html#bindSegment">Shim#bindSegment</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>True if the item exists and has been wrapped.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">boolean</span></dd></dl></div><h3 class="name has-anchor" id="normalizeIndex"><span class="type-signature"></span>normalizeIndex<span class="signature">(arrayLength, idx)</span><span class="type-signature"> &rarr; (nullable) {number}</span></h3><div class="description"><p>Ensures the given index is a valid index inside the array.</p><p>A negative index value is converted to a positive one by adding it to the array length before checking it.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>arrayLength</code></td><td class="type"><span class="param-type">number</span></td><td class="description last"><p>The length of the array this index is for.</p></td></tr><tr><td class="name"><code>idx</code></td><td class="type"><span class="param-type">number</span></td><td class="description last"><p>The index to normalize.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#normalizeIndex">Shim#normalizeIndex</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1527">line 1527</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The adjusted index value if it is valid, else <code>null</code>.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">number</span></dd></dl></div><h3 class="name has-anchor" id="noticeError"><span class="type-signature"></span>noticeError<span class="signature">(req, err<span class="signature-attributes">nullable</span>)</span></h3><div class="description"><p>Tells the shim that the given request has caused an error.</p><p>The given error will be checked for truthiness and if it passes the error predicate check before being held onto.</p><p>Use <a href="WebFrameworkShim.html#errorHandled"><code>WebFrameworkShim#errorHandled</code></a> to unnotice an error if it is later caught by the user.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>req</code></td><td class="type"><span class="param-type">Request</span></td><td class="attributes"></td><td class="description last"><p>The request which caused the error.</p></td></tr><tr><td class="name"><code>err</code></td><td class="type"><span class="param-type">*</span></td><td class="attributes">&lt;nullable><br></td><td class="description last"><p>The error which has occurred.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line290">line 290</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="WebFrameworkShim.html#errorHandled">WebFrameworkShim#errorHandled</a></li><li><a href="WebFrameworkShim.html#setErrorPredicate">WebFrameworkShim#setErrorPredicate</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="once"><span class="type-signature"></span>once<span class="signature">(fn)</span><span class="type-signature"> &rarr; {function}</span></h3><div class="description"><p>Wraps a function such that it will only be executed once.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>fn</code></td><td class="type"><span class="param-type">function</span></td><td class="description last"><p>The function to wrap in an execution guard.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#once">Shim#once</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1541">line 1541</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>A function which will execute <code>fn</code> at most once.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="popTransactionName"><span class="type-signature"></span>popTransactionName<span class="signature">(pathSegment<span class="signature-attributes">opt</span>)</span></h3><div class="description"><p>Pops one or more elements off the transaction naming stack.</p><ul><li><code>popTransactionName([pathSegment])</code></li></ul><p>Ideally it is not necessary to ever provide the <code>pathSegment</code> parameter for this function, but we do not live in an ideal world.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>pathSegment</code></td><td class="type"><span class="param-type">string</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Optional. Path segment to pop the stack repeatedly until a segment matching <code>pathSegment</code> is removed.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="TransactionShim.html#popTransactionName">TransactionShim#popTransactionName</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_transaction-shim.js.html">lib/shim/transaction-shim.js</a>, <a href="lib_shim_transaction-shim.js.html#line159">line 159</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="prefixRouteParameters"><span class="type-signature"></span>prefixRouteParameters<span class="signature">(params)</span><span class="type-signature"> &rarr; {void}</span></h3><div class="description"><p>This method is no longer in use. It still exists to avoid crashing applications. The logic of this method has been integrated into finalizing a web transaction.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>params</code></td><td class="type"><span class="param-type">object</span></td><td class="description last"><p>Object containing route/url parameter key/value pairs</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#prefixRouteParameters">Shim#prefixRouteParameters</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line2174">line 2174</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>method is now stubbed and logic ported into <code>finalizeWebTransaction</code></p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">void</span></dd></dl></div><h3 class="name has-anchor" id="proxy"><span class="type-signature"></span>proxy<span class="signature">(source, properties, dest)</span></h3><div class="description"><p>Proxies all set/get actions for each given property on <code>dest</code> onto <code>source</code>.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>source</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object on which all the set/get actions will actually occur.</p></td></tr><tr><td class="name"><code>properties</code></td><td class="type"><span class="param-type">string</span> |<wbr> <span class="param-type">Array.&lt;string></span></td><td class="description last"><p>All of the properties to proxy.</p></td></tr><tr><td class="name"><code>dest</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The object which is proxying the source's properties.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#proxy">Shim#proxy</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1632">line 1632</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="pushTransactionName"><span class="type-signature"></span>pushTransactionName<span class="signature">(pathSegment)</span></h3><div class="description"><p>Pushes a new path segment onto the transaction naming stack.</p><ul><li><code>pushTransactionName(pathSegment)</code></li></ul><p>Transactions are named for the middleware that sends the response. Some web frameworks are capable of mounting middleware in complex routing stacks. In order to maintain the correct name, transactions keep a stack of mount points for each middleware/router/app/whatever. The instrumentation should push on the mount path for wrapped things when route resolution enters and pop it back off when resolution exits the item.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>pathSegment</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>The path segment to add to the naming stack.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="TransactionShim.html#pushTransactionName">TransactionShim#pushTransactionName</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_transaction-shim.js.html">lib/shim/transaction-shim.js</a>, <a href="lib_shim_transaction-shim.js.html#line139">line 139</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="record"><span class="type-signature"></span>record<span class="signature">(nodule, properties<span class="signature-attributes">opt</span>, recordNamer)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Wraps a function with segment creation and binding.</p><ul><li><code>record(nodule, properties, recordNamer)</code></li><li><code>record(func, recordNamer)</code></li></ul><p>This is shorthand for calling <a href="Shim.html#wrap"><code>Shim#wrap</code></a> and manually creating a segment.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the properties to record, or a single function to record.</p></td></tr><tr><td class="name"><code>properties</code></td><td class="type"><span class="param-type">string</span> |<wbr> <span class="param-type">Array.&lt;string></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>One or more properties to record. If omitted, the <code>nodule</code> parameter is assumed to be the function to record.</p></td></tr><tr><td class="name"><code>recordNamer</code></td><td class="type"><span class="param-type"><a href="global.html#RecorderFunction">RecorderFunction</a></span></td><td class="attributes"></td><td class="description last"><p>A function which returns a record descriptor that gives the name and type of record we'll make.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#record">Shim#record</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line638">line 638</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="global.html#RecorderFunction">RecorderFunction</a></li><li><a href="RecorderSpec.html">RecorderSpec</a></li><li><a href="Shim.html#wrap">Shim#wrap</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter, possibly wrapped.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="recordMiddleware"><span class="type-signature"></span>recordMiddleware<span class="signature">(nodule, properties<span class="signature-attributes">opt</span>, spec<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Records the provided function as a middleware.</p><ul><li><code>recordMiddleware(nodule, properties [, spec])</code></li><li><code>recordMiddleware(func [, spec])</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the properties to wrap, or a single function to wrap.</p></td></tr><tr><td class="name"><code>properties</code></td><td class="type"><span class="param-type">string</span> |<wbr> <span class="param-type">Array.&lt;string></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>One or more properties to wrap. If omitted, the <code>nodule</code> parameter is assumed to be the function to wrap.</p></td></tr><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type"><a href="MiddlewareSpec.html">MiddlewareSpec</a></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The spec for wrapping the middleware.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line210">line 210</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li>WebFrameworkShim#wrapMiddlewareMounter</li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter to this function, after wrapping it or its properties.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="recordParamware"><span class="type-signature"></span>recordParamware<span class="signature">(nodule, properties<span class="signature-attributes">opt</span>, spec<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Records the provided function as a paramware.</p><ul><li><code>recordParamware(nodule, properties [, spec])</code></li><li><code>recordParamware(func [, spec])</code></li></ul><p>Paramware are specialized middleware that execute when certain route parameters are encountered. For example, the route <code>/users/:userId</code> could trigger a paramware hooked to <code>userId</code>.</p><p>For every new request that comes in, this should be called as early in the processing as possible.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the properties to wrap, or a single function to wrap.</p></td></tr><tr><td class="name"><code>properties</code></td><td class="type"><span class="param-type">string</span> |<wbr> <span class="param-type">Array.&lt;string></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>One or more properties to wrap. If omitted, the <code>nodule</code> parameter is assumed to be the function to wrap.</p></td></tr><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type"><a href="MiddlewareSpec.html">MiddlewareSpec</a></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The spec for wrapping the middleware.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line251">line 251</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter to this function, after wrapping it or its properties.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="recordRender"><span class="type-signature"></span>recordRender<span class="signature">(nodule, properties<span class="signature-attributes">opt</span>, spec<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Records calls to methods used for rendering views.</p><ul><li><code>recordRender(nodule, properties [, spec])</code></li><li><code>recordRender(func [, spec])</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the properties to wrap, or a single function to wrap.</p></td></tr><tr><td class="name"><code>properties</code></td><td class="type"><span class="param-type">string</span> |<wbr> <span class="param-type">Array.&lt;string></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>One or more properties to wrap. If omitted, the <code>nodule</code> parameter is assumed to be the function to wrap.</p></td></tr><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type"><a href="RenderSpec.html">RenderSpec</a></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The spec for wrapping the render method.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line172">line 172</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter to this function, after wrapping it or its properties.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="savePossibleTransactionName"><span class="type-signature"></span>savePossibleTransactionName<span class="signature">(req)</span></h3><div class="description"><p>Marks the current path as a potential responder.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>req</code></td><td class="type"><span class="param-type">Request</span></td><td class="description last"><p>The request which caused the error.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line334">line 334</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="setActiveSegment"><span class="type-signature"></span>setActiveSegment<span class="signature">(segment)</span><span class="type-signature"> &rarr; {TraceSegment}</span></h3><div class="description"><p>Explicitly sets the active segment to the one passed in. This method should only be used if there is no function to tie a segment's timing to.</p><ul><li><code>setActiveSegment(segment)</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>segment</code></td><td class="type"><span class="param-type">TraceSegment</span></td><td class="description last"><p>The segment to set as the active segment.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#setActiveSegment">Shim#setActiveSegment</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1190">line 1190</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><ul><li>The segment set as active on the context.</li></ul></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">TraceSegment</span></dd></dl></div><h3 class="name has-anchor" id="setDefaults"><span class="type-signature"></span>setDefaults<span class="signature">(obj<span class="signature-attributes">nullable</span>, defaults)</span><span class="type-signature"> &rarr; {object}</span></h3><div class="description"><p>Performs a shallow copy of each property from <code>defaults</code> only if <code>obj</code> does not already have that property, or the value of the key on <code>obj</code> is <code>null</code>.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">object</span></td><td class="attributes">&lt;nullable><br></td><td class="description last"><p>The object to copy the defaults onto.</p></td></tr><tr><td class="name"><code>defaults</code></td><td class="type"><span class="param-type">object</span></td><td class="attributes"></td><td class="description last"><p>A mapping of keys to default values.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#setDefaults">Shim#setDefaults</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1605">line 1605</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The <code>obj</code> with the default values copied onto it. If <code>obj</code> was falsey, then a new object with the defaults copied onto it is returned instead.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span></dd></dl></div><h3 class="name has-anchor" id="setErrorPredicate"><span class="type-signature"></span>setErrorPredicate<span class="signature">(pred)</span></h3><div class="description"><p>Sets a function to call when an error is noticed to determine if it is really an error.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>pred</code></td><td class="type"><span class="param-type">function</span></td><td class="description last"><p>Function which should return true if the object passed to it is considered an error.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line324">line 324</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="WebFrameworkShim.html#noticeError">WebFrameworkShim#noticeError</a></li><li><a href="WebFrameworkShim.html#errorHandled">WebFrameworkShim#errorHandled</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="setFramework"><span class="type-signature"></span>setFramework<span class="signature">(framework)</span></h3><div class="description"><p>Sets the name of the web framework in use by the server to the one given.</p><ul><li><code>setFramework(framework)</code></li></ul><p>This should be the first thing the instrumentation does.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>framework</code></td><td class="type"><span class="param-type"><a href="WebFrameworkShim.html#.FRAMEWORK_NAMES">WebFrameworkShim.<wbr>FRAMEWORK_NAMES</a></span> |<wbr> <span class="param-type">string</span></td><td class="description last"><p>The name of the framework.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line128">line 128</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="WebFrameworkShim.html#.FRAMEWORK_NAMES">WebFrameworkShim.FRAMEWORK_NAMES</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="setResponsePredicate"><span class="type-signature"></span>setResponsePredicate<span class="signature">(pred)</span></h3><div class="description"><p>Sets a function to call with the result of a middleware to determine if it has responded.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>pred</code></td><td class="type"><span class="param-type"><a href="global.html#ResponsePredicate">ResponsePredicate</a></span></td><td class="description last"><p>Function which should return true if the object passed to it is considered a response.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line359">line 359</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="setRouteParser"><span class="type-signature"></span>setRouteParser<span class="signature">(parser)</span><span class="type-signature"> &rarr; {undefined}</span></h3><div class="description"><p>Sets the function used to convert the route handed to middleware-adding methods into a string.</p><ul><li><code>setRouteParser(parser)</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>parser</code></td><td class="type"><span class="param-type"><a href="global.html#RouteParserFunction">RouteParserFunction</a></span></td><td class="description last"><p>The parser function to use.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line108">line 108</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">undefined</span></dd></dl></div><h3 class="name has-anchor" id="setTransactionName"><span class="type-signature"></span>setTransactionName<span class="signature">(name)</span></h3><div class="description"><p>Sets the name to be used for this transaction.</p><ul><li><code>setTransactionName(name)</code></li></ul><p>Either this <em>or</em> the naming stack should be used. Do not use them together.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>name</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>The name to use for the transaction.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="TransactionShim.html#setTransactionName">TransactionShim#setTransactionName</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_transaction-shim.js.html">lib/shim/transaction-shim.js</a>, <a href="lib_shim_transaction-shim.js.html#line176">line 176</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="setTransactionUri"><span class="type-signature"></span>setTransactionUri<span class="signature">(uri)</span></h3><div class="description"><p>Sets the URI path to be used for naming the transaction currently in scope.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>uri</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>The URI path to use for the transaction.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_webframework-shim_index.js.html">lib/shim/webframework-shim/index.js</a>, <a href="lib_shim_webframework-shim_index.js.html#line146">line 146</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="shimRequire"><span class="type-signature"></span>shimRequire<span class="signature">(filePath)</span><span class="type-signature"> &rarr; (nullable) {*}</span></h3><div class="description"><p>Loads a node module from the instrumented library's own root directory.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>filePath</code></td><td class="type"><span class="param-type">string</span></td><td class="description last"><p>A relative path inside the module's directory.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#shimRequire">Shim#shimRequire</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1658">line 1658</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The result of loading the given module. If the module fails to load, <code>null</code> is returned instead.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">*</span></dd></dl></div><h3 class="name has-anchor" id="storeSegment"><span class="type-signature"></span>storeSegment<span class="signature">(obj<span class="signature-attributes">non-null</span>, segment<span class="signature-attributes">opt</span>)</span></h3><div class="description"><p>Associates a segment with the given object.</p><ul><li><code>storeSegment(obj [, segment])</code></li></ul><p>If no segment is provided, the currently active segment is used.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="attributes"></td><td class="description last"><p>The object to retrieve a segment from.</p></td></tr><tr><td class="name"><code>segment</code></td><td class="type"><span class="param-type">TraceSegment</span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>The segment to link the object to.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#storeSegment">Shim#storeSegment</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1207">line 1207</a></li></ul></dd></div></dl><h3 class="name has-anchor" id="toArray"><span class="type-signature"></span>toArray<span class="signature">(obj)</span><span class="type-signature"> &rarr; {Array.&lt;*>}</span></h3><div class="description"><p>Converts an array-like object into an array.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>obj</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The array-like object (i.e. <code>arguments</code>).</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#toArray">Shim#toArray</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line1484">line 1484</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>An instance of <code>Array</code> containing the elements of the array-like.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">Array.&lt;*></span></dd></dl></div><h3 class="name has-anchor" id="unwrap"><span class="type-signature"></span>unwrap<span class="signature">(nodule, properties<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Unwraps one item, revealing the underlying value. If item is wrapped multiple times, the unwrap will not occur as we cannot safely unwrap.</p><ul><li><code>unwrap(nodule, property)</code></li><li><code>unwrap(func)</code></li></ul><p>If called with a <code>nodule</code> and properties, the unwrapped value will be put back on the nodule. Otherwise, the unwrapped function is just returned.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the properties to unwrap, or a single function to unwrap.</p></td></tr><tr><td class="name"><code>properties</code></td><td class="type"><span class="param-type">string</span> |<wbr> <span class="param-type">Array.&lt;string></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>One or more properties to unwrap. If omitted, the <code>nodule</code> parameter is assumed to be the function to unwrap.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#unwrap">Shim#unwrap</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line872">line 872</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter after unwrapping.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="wrap"><span class="type-signature"></span>wrap<span class="signature">(nodule, properties<span class="signature-attributes">opt</span>, spec, args<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Executes the provided spec on one or more objects.</p><ul><li><code>wrap(nodule, properties, spec [, args])</code></li><li><code>wrap(func, spec [, args])</code></li></ul><p>When called with a <code>nodule</code> and one or more properties, the spec will be executed on each property listed and the return value put back on the <code>nodule</code>.</p><p>When called with just a function, the spec will be executed on the function and the return value of the spec simply passed back.</p><p>The wrapped version will have the same prototype as the original method.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the properties to wrap, or a single function to wrap.</p></td></tr><tr><td class="name"><code>properties</code></td><td class="type"><span class="param-type">string</span> |<wbr> <span class="param-type">Array.&lt;string></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>One or more properties to wrap. If omitted, the <code>nodule</code> parameter is assumed to be the function to wrap.</p></td></tr><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type">Spec</span> |<wbr> <span class="param-type"><a href="global.html#WrapFunction">WrapFunction</a></span></td><td class="attributes"></td><td class="description last"><p>The spec for wrapping these items.</p></td></tr><tr><td class="name"><code>args</code></td><td class="type"><span class="param-type">Array.&lt;*></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Optional extra arguments to be sent to the spec when executing it.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#wrap">Shim#wrap</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line302">line 302</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="global.html#WrapFunction">WrapFunction</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter to this function, after wrapping it or its properties.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="wrapClass"><span class="type-signature"></span>wrapClass<span class="signature">(nodule, properties<span class="signature-attributes">opt</span>, spec, args<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Wraps a class constructor using a subclass with pre- and post-construction hooks.</p><ul><li><code>wrapClass(nodule, properties, spec [, args])</code></li><li><code>wrapClass(func, spec [, args])</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the properties to wrap, or a single function to wrap.</p></td></tr><tr><td class="name"><code>properties</code></td><td class="type"><span class="param-type">string</span> |<wbr> <span class="param-type">Array.&lt;string></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>One or more properties to wrap. If omitted, the <code>nodule</code> parameter is assumed to be the constructor to wrap.</p></td></tr><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type"><a href="ClassWrapSpec.html">ClassWrapSpec</a></span> |<wbr> <span class="param-type"><a href="global.html#ConstructorHookFunction">ConstructorHookFunction</a></span></td><td class="attributes"></td><td class="description last"><p>The spec for wrapping the returned value from the properties or a post hook.</p></td></tr><tr><td class="name"><code>args</code></td><td class="type"><span class="param-type">Array.&lt;*></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Optional extra arguments to be sent to the spec when executing it.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#wrapClass">Shim#wrapClass</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line526">line 526</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="Shim.html#wrap">Shim#wrap</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter to this function, after wrapping it or its properties.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div><h3 class="name has-anchor" id="wrapExport"><span class="type-signature"></span>wrapExport<span class="signature">(nodule, spec)</span><span class="type-signature"> &rarr; {*}</span></h3><div class="description"><p>Wraps the actual module being instrumented to change what <code>require</code> returns.</p><ul><li><code>wrapExport(nodule, spec)</code></li></ul></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">*</span></td><td class="description last"><p>The original export to replace with our new one.</p></td></tr><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type"><a href="global.html#WrapFunction">WrapFunction</a></span></td><td class="description last"><p>A wrapper function. The return value from this spec is what will replace the export.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#wrapExport">Shim#wrapExport</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line567">line 567</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The return value from <code>spec</code>.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">*</span></dd></dl></div><h3 class="name has-anchor" id="wrapReturn"><span class="type-signature"></span>wrapReturn<span class="signature">(nodule, properties<span class="signature-attributes">opt</span>, spec, args<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {object|function}</span></h3><div class="description"><p>Executes the provided spec with the return value of the given properties.</p><ul><li><code>wrapReturn(nodule, properties, spec [, args])</code></li><li><code>wrapReturn(func, spec [, args])</code></li></ul><p>If the wrapper is executed with <code>new</code> then the wrapped function will also be called with <code>new</code>. This feature should only be used with factory methods disguised as classes. Normally <a href="Shim.html#wrapClass"><code>Shim#wrapClass</code></a> should be used to wrap constructors instead.</p></div><div class="method-member-container flex flex-col w-100 overflow-auto mt-20"><strong>Parameters:</strong><table class="params"><thead><tr><th>Name</th><th>Type</th><th>Attributes</th><th class="last">Description</th></tr></thead><tbody><tr><td class="name"><code>nodule</code></td><td class="type"><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The source for the properties to wrap, or a single function to wrap.</p></td></tr><tr><td class="name"><code>properties</code></td><td class="type"><span class="param-type">string</span> |<wbr> <span class="param-type">Array.&lt;string></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>One or more properties to wrap. If omitted, the <code>nodule</code> parameter is assumed to be the function to wrap.</p></td></tr><tr><td class="name"><code>spec</code></td><td class="type"><span class="param-type">Spec</span> |<wbr> <span class="param-type">function</span></td><td class="attributes"></td><td class="description last"><p>The spec for wrapping the returned value from the properties.</p></td></tr><tr><td class="name"><code>args</code></td><td class="type"><span class="param-type">Array.&lt;*></span></td><td class="attributes">&lt;optional><br></td><td class="description last"><p>Optional extra arguments to be sent to the spec when executing it.</p></td></tr></tbody></table></div><dl class="details"><div class="details-item-container"><dt class="inherited-from bold">Inherited From</dt><dd class="inherited-from"><ul><li><a href="Shim.html#wrapReturn">Shim#wrapReturn</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-source bold">Source</dt><dd class="tag-source"><ul><li><a href="lib_shim_shim.js.html">lib/shim/shim.js</a>, <a href="lib_shim_shim.js.html#line384">line 384</a></li></ul></dd></div><div class="details-item-container"><dt class="tag-see bold">See</dt><dd class="tag-see"><ul><li><a href="Shim.html#wrap">Shim#wrap</a></li></ul></dd></div></dl><div class="method-member-container mt-20"><strong>Returns:</strong><div class="param-desc"><p>The first parameter to this function, after wrapping it or its properties.</p></div><dl class="param-type"><dt>Type:&nbsp;</dt><dd><span class="param-type">object</span> |<wbr> <span class="param-type">function</span></dd></dl></div></article></section></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="API.html">API</a></div><div class="sidebar-section-children"><a href="ClassWrapSpec.html">ClassWrapSpec</a></div><div class="sidebar-section-children"><a href="DatastoreParameters.html">DatastoreParameters</a></div><div class="sidebar-section-children"><a href="DatastoreShim.html">DatastoreShim</a></div><div class="sidebar-section-children"><a href="InstrumentationDescriptor.html">InstrumentationDescriptor</a></div><div class="sidebar-section-children"><a href="MessageShim.html">MessageShim</a></div><div class="sidebar-section-children"><a href="MessageSpec.html">MessageSpec</a></div><div class="sidebar-section-children"><a href="MessageSubscribeSpec.html">MessageSubscribeSpec</a></div><div class="sidebar-section-children"><a href="MiddlewareMounterSpec.html">MiddlewareMounterSpec</a></div><div class="sidebar-section-children"><a href="MiddlewareSpec.html">MiddlewareSpec</a></div><div class="sidebar-section-children"><a href="OperationSpec.html">OperationSpec</a></div><div class="sidebar-section-children"><a href="PromiseShim.html">PromiseShim</a></div><div class="sidebar-section-children"><a href="QuerySpec.html">QuerySpec</a></div><div class="sidebar-section-children"><a href="QueueMessageParameters.html">QueueMessageParameters</a></div><div class="sidebar-section-children"><a href="RecorderSpec.html">RecorderSpec</a></div><div class="sidebar-section-children"><a href="RenderSpec.html">RenderSpec</a></div><div class="sidebar-section-children"><a href="SegmentSpec.html">SegmentSpec</a></div><div class="sidebar-section-children"><a href="Shim.html">Shim</a></div><div class="sidebar-section-children"><a href="TransactionHandle.html">TransactionHandle</a></div><div class="sidebar-section-children"><a href="TransactionShim.html">TransactionShim</a></div><div class="sidebar-section-children"><a href="TransactionSpec.html">TransactionSpec</a></div><div class="sidebar-section-children"><a href="WebFrameworkShim.html">WebFrameworkShim</a></div><div class="sidebar-section-children"><a href="WrapSpec.html">WrapSpec</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-tutorials"><div>Tutorials</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="tutorial-instrumentation.html">Instrumentation Examples</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-interfaces"><div>Interfaces</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="ParsedQueryData.html">ParsedQueryData</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#CallbackBindFunction">CallbackBindFunction</a></div><div class="sidebar-section-children"><a href="global.html#ClassWrapSpecParams">ClassWrapSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#ConstructorHookFunction">ConstructorHookFunction</a></div><div class="sidebar-section-children"><a href="global.html#DatastoreParametersParams">DatastoreParametersParams</a></div><div class="sidebar-section-children"><a href="global.html#InContextCallback">InContextCallback</a></div><div class="sidebar-section-children"><a href="global.html#InstrumentationDescriptorParams">InstrumentationDescriptorParams</a></div><div class="sidebar-section-children"><a href="global.html#InstrumentationOnError">InstrumentationOnError</a></div><div class="sidebar-section-children"><a href="global.html#InstrumentationOnRequire">InstrumentationOnRequire</a></div><div class="sidebar-section-children"><a href="global.html#MessageBrokerHeadersFn">MessageBrokerHeadersFn</a></div><div class="sidebar-section-children"><a href="global.html#MessageConsumerWrapperFunction">MessageConsumerWrapperFunction</a></div><div class="sidebar-section-children"><a href="global.html#MessageFunction">MessageFunction</a></div><div class="sidebar-section-children"><a href="global.html#MessageHandlerFunction">MessageHandlerFunction</a></div><div class="sidebar-section-children"><a href="global.html#MessageSpecParams">MessageSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#MessageSubscribeSpecParams">MessageSubscribeSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#MiddlewareMounterSpecParams">MiddlewareMounterSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#MiddlewareSpecParams">MiddlewareSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#MiddlewareTypeNames">MiddlewareTypeNames</a></div><div class="sidebar-section-children"><a href="global.html#MiddlewareWrapperFunction">MiddlewareWrapperFunction</a></div><div class="sidebar-section-children"><a href="global.html#OperationSpecParams">OperationSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#QueryFunction">QueryFunction</a></div><div class="sidebar-section-children"><a href="global.html#QueryParserFunction">QueryParserFunction</a></div><div class="sidebar-section-children"><a href="global.html#QuerySpecFunction">QuerySpecFunction</a></div><div class="sidebar-section-children"><a href="global.html#QuerySpecParams">QuerySpecParams</a></div><div class="sidebar-section-children"><a href="global.html#QueueMessageParametersParams">QueueMessageParametersParams</a></div><div class="sidebar-section-children"><a href="global.html#RecorderFunction">RecorderFunction</a></div><div class="sidebar-section-children"><a href="global.html#RecorderSpecParams">RecorderSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#RenderSpecParams">RenderSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#ResponsePredicate">ResponsePredicate</a></div><div class="sidebar-section-children"><a href="global.html#RouteNextFunction">RouteNextFunction</a></div><div class="sidebar-section-children"><a href="global.html#RouteParameterFunction">RouteParameterFunction</a></div><div class="sidebar-section-children"><a href="global.html#RouteParserFunction">RouteParserFunction</a></div><div class="sidebar-section-children"><a href="global.html#RouteRequestFunction">RouteRequestFunction</a></div><div class="sidebar-section-children"><a href="global.html#SegmentFunction">SegmentFunction</a></div><div class="sidebar-section-children"><a href="global.html#SegmentSpecParams">SegmentSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#SpecAfterFunction">SpecAfterFunction</a></div><div class="sidebar-section-children"><a href="global.html#TransactionSpecParams">TransactionSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#WrapFunction">WrapFunction</a></div><div class="sidebar-section-children"><a href="global.html#WrapSpecParams">WrapSpecParams</a></div><div class="sidebar-section-children"><a href="global.html#createShimFromType">createShimFromType</a></div><div class="sidebar-section-children"><a href="global.html#getDatabaseNameFromUseQuery">getDatabaseNameFromUseQuery</a></div><div class="sidebar-section-children"><a href="global.html#startSegmentCallback">startSegmentCallback</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>